---
layout:     post
title:      "初识DevOps知多少"
subtitle:   "代码笔记第四话"
date:       2018-02-12
author:     "XiaoYu"
header-img: "img/post-devops.jpg"
tags:
    - 随笔
    - 经验
    - Code
---

> 一月份来到深圳，参加第一份实习，虽然公司比较小，但还是不错的

## 聚领威锋

大概是2014年吧，接触到了苹果设备，那个时候对我来说还是很新奇的事物，遇到了问题就在百度上面搜，出来结果的前几个一般都是威锋论坛的内容，然后就点进去看，确实得到了想要的答案，就是从那个时候起，我知道了威锋网——千万果粉的大本营。
之后在去年底的时候，闲来无事，发现威锋公众号上贴出了招实习生的计划，于是投了Web开发和iOS开发的申请，然后是面试之类的，以为自己应该去不了，没想到还是去了。


---

## 运维

到这边似乎并没有适合的职位，给了我安全、运维的方向，其实我对这个是没有了解的，一切只能从头开始学习，当然这也是实习的一部分。

运维其实是一个很杂的东西，就像安全一样，虽然没有那么大的范围，但要做的东西还真的不少，而且很多都是需要与服务器直接交互，因此管理起来就比较复杂，运维的工作就是产品的部署、发布和后期的运行维护。充当的往往是幕后的工作。因此有戏称运维是装软件的，其实这么说还是有一些道理的。

一个运维工程师所需的技术体系以其专业方向而异。但基本的计算机系统架构，操作系统，网络技术的掌握是基本要求。例如需要熟练掌握linux操作系统的使用，熟练使用各种脚本工具来处理日常工作任务，精通TCP/IP协议栈以排查一个大规模网络系统中的流量异常问题等。更进一步的需要形成一套软件可运维性方面的经验积累，以此作为后续工作的指导。可以说运维需要的技能是十分多的，这也要求我保持不断的学习。

## DevOps

这其实是一个比较新的概念，大约是16年被提出来，**DevOps**是单词`Development`和`Operations`的结合，目的即是消除开发与运维之间的鸿沟，以加快生产速度，它应该被称为一种方法论而不是技术。现在我们都在倡导敏捷开发，那么DevOps的作用就是将敏捷扩展至生产端。下图很好的说明了它的结构。![DevOps概念图](/img/in_post/310906.jpg)
从图中可以看出一个产品的发展阶段都被连接到了一起，而将这些步骤连接起来的就是所用到的工具，尽管工具本身并不能代表DevOps，但我们必须要去选择合适的来使用。

走出自动化运维的第一步只是一些工具的利用，目前我接触到的还只有Jenkins Ansible Gitlab。

其中jenkins 是广泛采用的一个集成平台，通过各种插件，可以构建各种的Job，实现一种聚合的功能，而Ansible的作用则是部署和分发，它通过SSH和子节点建立连接，然后根据Playbook的命令直接在节点上运行，这个软件的优势是不需要在子节点上进行额外的配置，大大减少了大规模系统中的工作量。Gitlab 对我来说是既熟悉又陌生，熟悉是因为它只是基于Git的理念开发的一个仓库存储方式，陌生则是因为我一直用的是Github，不过在接触了Gitlab之后，发现学习成本可以说是没有的，毕竟只是一个代码托管仓库，在公司内部服务器上已经配置好了，使用起来也十分便捷，另外，Gitlab上不仅会放产品代码，像Playbook和Pipeline文件也会放在上面，实现一个统一的管理。

## 具体能做什么

目前我实现的是iOS开发中的编译、测试和打包，都可以通过Jenkins构建相应的任务，说到这里就得提一下Jenkins的插件问题。目前已经有超过1600款插件加入到了Jenkins中，然而其中有很多已经无法使用了，因为大部分都是个人开发的，没有一个统一的更新保证，因此我们在使用Jenkis时应该避免使用过多的插件，而且，Jenkins在启动时会加载所有的插件，这也会消耗一定的资源。我在刚使用Jenkins时，用了`xcode integration`这个插件，结果编译时遇到描述文件无法找的的错误，结果发现是因为`xcode`升级到9之后，禁止外部访问钥匙串，而那款插件的最近一次更新是在去年7月份，早于`xcode9`发布的9月份。最后还是直接使用shell来搞定，不过这也在一定程度上减少了自动化的意义。

接下来我还要深入研究一下Ansible,此前的iOS打包是通过Jenkins自带的slave功能，为了后面的统一，我会考虑全面使用Ansible来管理子节点，让它们各司其职。之后还有Web服务相关的Job，也要使用Ansible来部署，我自己还在思考运营那边是否可以接入到这个平台中，以将公司整体加入到一个生产线中，当然这是后面的事了。

### DevSecOps

这是去年RSA大会上提出的概念，即在其中引入安全的理念，同样，这需要各种工具的配合，需要说明的是，它并不是指仅仅在某些环节添加安全测试，而是在整个过程中加入安全的概念，这个新的理念目前还没有被大量的采用，可供查询的资料也比较少，为了结合我的专业知识，这个我是必须要好好关注的。

## 关于安全

现在对于小公司来说安全只是拿来用的东西，本质上还是为了利益服务的，这并不是我所乐于看到的，尽管他们需要考虑成本的问题。我个人还是更愿意成为一名安全研究人员，是技术驱动型而不是产品驱动型。

我的目标还在未来。



